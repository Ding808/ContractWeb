@page "/case-research"

<h3>Internet Case Research</h3>

<div class="alert alert-danger" role="alert" hidden="@(!showError)">
    @errorMessage
</div>

<div class="mb-3">
    <label for="searchQuery" class="form-label">Enter Legal Search Query</label>
    <input type="text" id="searchQuery" class="form-control" @bind="searchQuery" placeholder="Type a legal query..." />
</div>

<button class="btn btn-primary" @onclick="PerformSearch">Perform Search</button>

@if (searchPerformed)
{
    <div class="mt-3">
        <h5>Search Results</h5>
        @if (searchResults.Count > 0)
        {
            <ul class="list-group">
                @foreach (var result in searchResults)
                {
                    <li class="list-group-item">@result</li>
                }
            </ul>
            <button class="btn btn-success mt-2" @onclick="SaveResults">Save Search Results</button>
        }
        else
        {
            <div class="alert alert-warning" role="alert">No results found.</div>
        }
    </div>
}

@code {
    private string searchQuery = string.Empty;
    private bool searchPerformed = false;
    private bool showError = false;
    private string errorMessage = string.Empty;
    private List<string> searchResults = new();

    private void PerformSearch()
    {
        showError = false;
        searchPerformed = false;
        searchResults.Clear();

        if (string.IsNullOrWhiteSpace(searchQuery))
        {
            showError = true;
            errorMessage = "Search query cannot be empty.";
            return;
        }

        // Mock search results (replace with real API call later)
        searchResults.Add("Legal Case 1: Example Citation");
        searchResults.Add("Legal Case 2: Another Citation");
        searchPerformed = true;
    }

    private void SaveResults()
    {
        // Mock save operation
        showError = false;
        errorMessage = "Search results saved successfully.";
        showError = true; // Simulate a success alert
    }
}

